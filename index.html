<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>For My Riya â¤ï¸</title>
    <link href="https://fonts.googleapis.com/css2?family=Fredoka:wght@400;600&family=Pacifico&family=Dancing+Script:wght@700&family=Playfair+Display:wght@600&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js"></script>
    
    <script type="text/javascript">
        (function() {
            emailjs.init("QaL88WQsnfFhga08G"); 
        })();
    </script>

    <style>
        /* --- CSS STYLES --- */
        * { margin: 0; padding: 0; box-sizing: border-box; cursor: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg'  width='40' height='48' viewport='0 0 100 100' style='fill:black;font-size:24px;'><text y='50%'>â¤ï¸</text></svg>") 16 0, auto; }
        body { display: flex; justify-content: center; align-items: center; min-height: 100vh; background: linear-gradient(135deg, #ff9a9e 0%, #fecfef 99%, #fecfef 100%); font-family: 'Fredoka', sans-serif; overflow: hidden; perspective: 1000px; }
        .bg-element { position: absolute; color: rgba(255, 255, 255, 0.6); animation: floatUp 15s infinite linear; z-index: 0; font-size: 2rem; text-shadow: 0 0 10px rgba(255,255,255,0.3); }
        @keyframes floatUp { 0% { transform: translateY(110vh) rotate(0deg) scale(0.8); opacity: 0; } 100% { transform: translateY(-10vh) rotate(360deg) scale(1.2); opacity: 0; } }
        
        .container { text-align: center; background: rgba(255, 255, 255, 0.75); backdrop-filter: blur(20px); -webkit-backdrop-filter: blur(20px); padding: 40px 30px; border-radius: 40px; box-shadow: 0 30px 70px rgba(0,0,0,0.15), inset 0 0 0 2px rgba(255,255,255,0.8); width: 90%; max-width: 480px; z-index: 10; transform-style: preserve-3d; transition: transform 0.1s ease-out; position: relative; }
        .content-layer { transform: translateZ(60px); }
        h1 { color: #ff4757; font-family: 'Pacifico', cursive; font-size: 2.2rem; margin-bottom: 15px; text-shadow: 2px 2px 0px rgba(255,255,255,0.8); }
        p { color: #555; font-size: 1.1rem; margin-bottom: 25px; line-height: 1.5; font-weight: 600; }
        
        .scroll-area { background: #fffdf0; padding: 25px; border-radius: 15px; box-shadow: inset 0 0 20px rgba(0,0,0,0.05); max-height: 50vh; overflow-y: auto; margin-bottom: 20px; border: 2px dashed #ffafbd; }
        .scroll-area::-webkit-scrollbar { width: 6px; } .scroll-area::-webkit-scrollbar-thumb { background: #ff4757; border-radius: 10px; }
        
        .btn { background: linear-gradient(45deg, #ff6b81, #ff4757); color: white; border: none; padding: 15px 30px; font-size: 1.1rem; border-radius: 50px; cursor: pointer; box-shadow: 0 10px 20px rgba(255, 71, 87, 0.3); font-weight: 600; min-width: 120px; transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275); width: 100%; max-width: 250px; margin-bottom: 10px; }
        .btn-secondary { background: white; border: 2px solid #ff6b81; color: #ff6b81; }
        .btn:hover { transform: scale(1.05) translateY(-3px); box-shadow: 0 15px 30px rgba(255, 71, 87, 0.4); }
        .btn-group { display: flex; justify-content: center; gap: 15px; flex-wrap: wrap; margin-top: 10px; }

        /* PROMISE DAY STYLES */
        .promise-text { font-family: 'Playfair Display', serif; font-size: 1.4rem; color: #d63031; line-height: 1.6; font-style: italic; min-height: 120px; display: flex; align-items: center; justify-content: center; }
        .pookie-img { width: 150px; border-radius: 15px; border: 3px solid #ff7675; margin-bottom: 15px; transition: 0.3s; }
        #punishment-box { width: 100%; padding: 10px; border: 2px solid #ff7675; border-radius: 10px; font-family: 'Fredoka'; margin-bottom: 10px; min-height: 60px; }
        
        /* Utils */
        .hidden { display: none; }
        .fade-in { animation: popIn 0.6s cubic-bezier(0.175, 0.885, 0.32, 1.275); }
        @keyframes popIn { 0% { opacity: 0; transform: scale(0.5) translateZ(60px); } 100% { opacity: 1; transform: scale(1) translateZ(60px); } }
        
        /* Overlay */
        .overlay-popup { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.6); backdrop-filter: blur(8px); display: flex; justify-content: center; align-items: center; z-index: 100; opacity: 0; pointer-events: none; transition: opacity 0.3s; }
        .overlay-popup.active { opacity: 1; pointer-events: auto; }
        .overlay-content { background: white; padding: 25px; border-radius: 30px; text-align: center; transform: scale(0.8); transition: transform 0.3s; border: 4px solid #ffc3a0; }
        .overlay-popup.active .overlay-content { transform: scale(1); animation: bounce 0.5s; }
        .overlay-content img { max-width: 250px; border-radius: 20px; border: 3px solid #ffeff1; }
        @keyframes bounce { 0%, 20%, 50%, 80%, 100% {transform: translateY(0);} 40% {transform: translateY(-20px);} 60% {transform: translateY(-10px);} }

        /* Images */
        .choco-img { width: 100%; max-width: 200px; border-radius: 15px; margin: 15px 0; }
        .teddy-img { width: 100%; max-width: 220px; border-radius: 20px; border: 4px solid #ff9a9e; margin: 20px 0; }
        .hug-img { width: 100%; max-width: 220px; border-radius: 20px; border: 4px solid #ff9a9e; margin: 20px 0; transition: all 0.5s; }
        .heartbeat-bg { animation: pulseBg 2s infinite; }
        @keyframes pulseBg { 0% { transform: scale(1); } 50% { transform: scale(1.02); } 100% { transform: scale(1); } }
        
        /* Gift Styles */
        .gift-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 20px; margin-top: 20px; justify-items: center; }
        .gift-wrapper { display: flex; flex-direction: column; align-items: center; cursor: pointer; transition: transform 0.3s; }
        .gift-wrapper:nth-child(5) { grid-column: span 2; }
        .gift-box { font-size: 3.5rem; position: relative; animation: floatGift 3s ease-in-out infinite; }
        .gift-label { margin-top: 5px; font-weight: bold; color: #ff6b81; background: white; padding: 4px 12px; border-radius: 15px; font-size: 0.9rem; }
        @keyframes floatGift { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-10px); } }
        .gift-wrapper.completed .gift-box::after { content: 'âœ…'; position: absolute; bottom: -5px; right: -10px; font-size: 1.5rem; }
        
        .letter-text { font-size: 1.8rem; line-height: 1.6; font-weight: 700; font-family: 'Dancing Script'; text-align: left;}
        .highlight-text { color: #ff4757; background: rgba(255, 255, 255, 0.8); padding: 0 5px; border-radius: 5px; }
        .flower-highlight { color: #d35400; background: #ffeaa7; padding: 2px 8px; border-radius: 15px; border: 2px solid #fdcb6e; display: inline-block; transform: rotate(-2deg); }
        .propose-text { font-family: 'Playfair Display', serif; text-align: center; color: #2c3e50; font-size: 1.2rem; line-height: 1.8; font-weight: 600; }
        .propose-highlight { color: #c0392b; font-weight: bold; font-size: 1.3rem; background: rgba(255, 200, 200, 0.3); padding: 0 5px; border-radius: 4px; }
    </style>
</head>
<body>

    <script>
        const shapes = ['â¤ï¸', 'âœ¨', 'ğŸŒ¸', 'ğŸ€', 'ğŸ¬', 'ğŸ§¸', 'ğŸ¤', 'ğŸ«‚'];
        for(let i=0; i<25; i++){
            let el = document.createElement('div');
            el.className = 'bg-element';
            el.innerHTML = shapes[Math.floor(Math.random() * shapes.length)];
            el.style.left = Math.random() * 100 + 'vw';
            el.style.animationDuration = (Math.random() * 10 + 10) + 's';
            el.style.animationDelay = (Math.random() * 5) + 's';
            document.body.appendChild(el);
        }
    </script>

    <div id="gif-overlay" class="overlay-popup">
        <div class="overlay-content">
            <img id="overlay-img" src="" alt="Reaction">
            <h2 id="overlay-text" style="color: #ff4757; margin-top: 15px; font-family: 'Fredoka';"></h2>
        </div>
    </div>

    <div class="container fade-in" id="card3d">
        <div class="content-layer">
            
            <div id="intro-section">
                <h1>Hey Riya! ğŸ‘‹</h1>
                <p>I built a magical little world just for you.<br>Ready to step inside?</p>
                <div class="btn-group intro-btns">
                    <button class="btn btn-secondary" onclick="handleStartNo()">No</button>
                    <button class="btn" onclick="startJourney()">Yes!</button>
                </div>
            </div>

            <div id="anya-section" class="hidden">
                <h1 style="font-size: 3rem; margin-bottom: 10px;">ğŸ˜â¤ï¸</h1>
                <img src="GIF/Anya heh.gif" alt="Anya" style="width: 100%; max-width: 250px; border-radius: 20px;">
            </div>

            <div id="gift-menu" class="hidden">
                <h1>Your Gifts ğŸ</h1>
                <p>Open them in any order!</p>
                <div class="gift-grid">
                    <div class="gift-wrapper" id="gift1-wrap" onclick="openGift(1)"><div class="gift-box">ğŸ</div><div class="gift-label">Fun Quiz</div></div>
                    <div class="gift-wrapper" id="gift2-wrap" onclick="openGift(2)"><div class="gift-box">ğŸ’Œ</div><div class="gift-label">Love Letter</div></div>
                    <div class="gift-wrapper" id="gift3-wrap" onclick="openGift(3)"><div class="gift-box">ğŸ’</div><div class="gift-label">The Question</div></div>
                    <div class="gift-wrapper" id="gift4-wrap" onclick="openGift(4)"><div class="gift-box">ğŸ“¸</div><div class="gift-label">Memories</div></div>
                    <div class="gift-wrapper" id="gift5-wrap" onclick="openGift(5)"><div class="gift-box">ğŸ“…</div><div class="gift-label">Val Week</div></div>
                </div>
            </div>

            <div id="g1-q1" class="hidden"><h1>Q1 ğŸ§</h1><p>Who is the boss?</p><div class="btn-group"><button class="btn btn-secondary" onclick="triggerNah()">Ankush</button><button class="btn" onclick="nextQ('g1-q1', 'g1-q2')">Riya</button></div></div>
            <div id="g1-q2" class="hidden"><h1>Q2 ğŸ¥°</h1><p>Who is cuter?</p><div class="btn-group"><button class="btn btn-secondary" onclick="triggerNah()">Me</button><button class="btn btn-secondary" onclick="triggerNah()">You</button><button class="btn" onclick="nextQ('g1-q2', 'g1-q3')">Sammy</button></div></div>
            <div id="g1-q3" class="hidden"><h1>Q3 ğŸ­</h1><p>Drama Queen?</p><div class="btn-group"><button class="btn btn-secondary" onclick="triggerNah()">Me</button><button class="btn" onclick="nextQ('g1-q3', 'g1-q4')">You</button></div></div>
            <div id="g1-q4" class="hidden"><h1>Q4 ğŸ§ </h1><p>Overthinker?</p><div class="btn-group"><button class="btn btn-secondary" onclick="triggerNah()">Me</button><button class="btn btn-secondary" onclick="triggerNah()">You</button><button class="btn" onclick="finishGift1()">Both</button></div></div>

            <div id="g2-letter" class="hidden">
                <h1 style="font-size: 2rem;">Dear Riya... ğŸŒ¹</h1>
                <div class="scroll-area letter-paper">
                    <div class="letter-text">
                        <p>I donâ€™t know if there will ever be a perfect moment to say all this, so Iâ€™m choosing an honest one.</p><br>
                        <p>I just want you to know how deeply I love you. Not in a loud way, but in a quiet wayâ€”the kind where I want you to stay.</p><br>
                        <p style="color:#ff4757;">Koi itna pyaara kaise ho sakta hai.</p><br>
                        <p>You are important to me in ways I donâ€™t always know how to explain. You live in my peace, my smiles, my memories, my hopes, and even my prayers.</p><br>
                        <div class="highlight-text"><p>You are loved. You are valued. And you will always be important to me, Riya.</p></div>
                    </div>
                </div>
                <button class="btn" onclick="finishGift2()">Close Letter â¤ï¸</button>
            </div>

            <div id="g3-proposal" class="hidden">
                <img src="GIF/shy.gif" alt="Shy" style="width: 100%; max-width: 250px; border-radius: 20px;">
                <h1>Will you be my Valentine? ğŸŒ¹</h1>
                <div class="btn-group">
                    <button class="btn" id="g3-yes-btn" onclick="handleProposalYes()">Yes</button>
                    <button class="btn btn-secondary" id="g3-no-btn" onclick="handleProposalNo()">No</button>
                </div>
            </div>

            <div id="g5-val-week" class="hidden">
                <h1 style="font-size: 2.2rem;">Valentine Week ğŸ—“ï¸</h1>
                <div class="scroll-area" style="padding: 15px; background: rgba(255,255,255,0.8);">
                    <div class="btn-group" style="flex-direction: column; width: 100%; align-items: center;">
                        <button class="btn" style="width: 100%; margin-bottom: 8px;" onclick="openRoseDay()">Feb 7 - Rose Day ğŸŒ¹</button>
                        <button class="btn" style="width: 100%; margin-bottom: 8px;" onclick="openProposeDay()">Feb 8 - Propose Day ğŸ’</button>
                        <button class="btn btn-secondary" id="btn-choco" style="width: 100%; margin-bottom: 5px; opacity: 0.7; line-height: 1.2;" onclick="alert('Wait for it! Upcoming... â³')">Feb 9 - Chocolate Day ğŸ«<br><span id="timer-choco" style="font-size: 0.8rem;">(Locked)</span></button>
                        <button class="btn btn-secondary" id="btn-teddy" style="width: 100%; margin-bottom: 5px; opacity: 0.7; line-height: 1.2;" onclick="alert('Wait for it! Upcoming... â³')">Feb 10 - Teddy Day ğŸ§¸<br><span id="timer-teddy" style="font-size: 0.8rem;">(Locked)</span></button>
                        <button class="btn btn-secondary" id="btn-promise" style="width: 100%; margin-bottom: 5px; opacity: 0.7; line-height: 1.2;" onclick="alert('Wait for it! Upcoming... â³')">Feb 11 - Promise Day ğŸ¤<br><span id="timer-promise" style="font-size: 0.8rem;">(Locked)</span></button>
                        
                        <button class="btn btn-secondary" id="btn-hug" style="width: 100%; margin-bottom: 5px; opacity: 0.7; line-height: 1.2;" onclick="alert('Wait for it! Upcoming... â³')">Feb 12 - Hug Day ğŸ¤—<br><span id="timer-hug" style="font-size: 0.8rem;">(Locked)</span></button>

                        <button class="btn btn-secondary" id="btn-kiss" style="width: 100%; margin-bottom: 5px; opacity: 0.7; line-height: 1.2;" onclick="alert('Wait for it! Upcoming... â³')">Feb 13 - Kiss Day ğŸ’‹<br><span id="timer-kiss" style="font-size: 0.8rem;">(Locked)</span></button>
                        <button class="btn btn-secondary" id="btn-val" style="width: 100%; margin-bottom: 5px; opacity: 0.7; line-height: 1.2;" onclick="alert('Wait for it! Upcoming... â³')">Feb 14 - Valentine's Day â¤ï¸<br><span id="timer-val" style="font-size: 0.8rem;">(I have a surprise for you)</span></button>
                    </div>
                </div>
                <button class="btn" style="margin-top: 10px;" onclick="finishGift5()">Back to Menu ğŸ”™</button>
            </div>

            <div id="rose-day-card" class="hidden"><div id="petals-container"></div><h1 style="font-size: 2.5rem;">Happy Rose Day ğŸŒ¹</h1><div class="scroll-area letter-paper"><div class="letter-text"><p>They say Rose Day is about giving flowers, but for me, itâ€™s about giving a <span class="highlight-text">feeling</span>.</p><p>A feeling of <span class="highlight-text">care</span>...</p></div></div><button class="btn" onclick="closeRoseDay()">Close â¤ï¸</button></div>
            <div id="propose-day-card-1" class="hidden heartbeat-bg"><div class="scroll-area"><div class="propose-text"><p>Thereâ€™s a Turkish belief...</p></div></div><button class="btn" onclick="nextProposePage()">Next â¤ï¸</button></div>
            <div id="propose-day-card-2" class="hidden"><h1 style="font-family: 'Dancing Script'; font-size: 3rem; color: #c2185b;">Riya, will you be mine?</h1><div id="propose-message"></div><div class="btn-group"><button class="btn" onclick="handleProposeDayYes()">Yes! â¤ï¸</button><button class="btn btn-secondary" id="propose-day-no-btn" onclick="handleProposeDayNo()">No</button></div></div>
            <div id="chocolate-day-card" class="hidden choco-card-container"><h1>Happy Chocolate Day! ğŸ«</h1><img src="GIF/chocolate.gif" class="choco-img"><button class="btn" onclick="nextChocoSequence(1)">Next</button></div>
            <div id="choco-card-1" class="hidden choco-card-container"><img src="gallery/pie.png" class="choco-img"><h1>Hey my...</h1><button class="btn" onclick="nextChocoSequence(2)">Next</button></div>
            <div id="choco-card-2" class="hidden choco-card-container"><img src="gallery/fuse.png" class="choco-img"><h1>My mind gets...</h1><button class="btn" onclick="nextChocoSequence(3)">Next</button></div>
            <div id="choco-card-3" class="hidden choco-card-container"><img src="gallery/gems.png" class="choco-img"><h1>You are true...</h1><button class="btn" onclick="nextChocoSequence(4)">Next</button></div>
            <div id="choco-card-4" class="hidden choco-card-container"><img src="gallery/5star.png" class="choco-img"><h1>I will give you...</h1><button class="btn" onclick="finishChocoSequence()">Done â¤ï¸</button></div>
            <div id="teddy-card-1" class="hidden choco-card-container"><img src="GIF/teddy.gif" class="teddy-img"><h1>Main hu na...</h1><button class="btn" onclick="nextTeddySequence(2)">Still Teddy Chaiye ğŸ¥º</button></div>
            <div id="teddy-card-2" class="hidden choco-card-container"><img src="GIF/teddycry.gif" class="teddy-img"><h1>Hmph! Jao...</h1><button class="btn" onclick="nextTeddySequence(3)">Aree sorry, next! â¤ï¸</button></div>
            <div id="teddy-card-3" class="hidden choco-card-container"><img src="GIF/teddyplay.gif" class="teddy-img"><h1>Mere sath khel lena ğŸ˜‰</h1><button class="btn" onclick="finishTeddySequence()">Back ğŸ”™</button></div>

            <div id="promise-day-card" class="hidden">
                <h1 style="font-family: 'Dancing Script', cursive; font-size: 2.5rem; color: #d63031;">7 Promises to You ğŸ¤</h1>
                <div class="scroll-area" style="background: white;">
                    <div id="promise-content"><div class="promise-text">Click Next to read...</div></div>
                </div>
                <div id="promise-controls"><button class="btn" style="background: #d63031;" onclick="nextPromise()">Next Promise ğŸŒ¹</button></div>
                <div id="promise-final" class="hidden">
                    <img src="GIF/sorry1.gif" class="pookie-img" id="sorry-img">
                    <h2 style="color: #d63031;">I promise I will never shout on you again... ğŸ¥º</h2>
                    <p style="color: #555;">(This was the last time)</p>
                    <div id="punishment-section" class="hidden">
                        <p style="color: #ff6b81; font-weight: bold;">Kya saza hai meri?</p>
                        <textarea id="punishment-box" placeholder="Write punishment here..."></textarea>
                    </div>
                    <div class="btn-group" id="forgive-btns">
                        <button class="btn" style="background: #00b894;" onclick="handleForgiveness()">Maaf Kiya â¤ï¸</button>
                        <button class="btn btn-secondary" id="btn-no-forgive" onclick="handleForgiveNo()">Nahi kru gi ğŸ˜¤</button>
                        <button class="btn hidden" id="btn-punish" style="background: #6c5ce7;" onclick="submitPunishment()">Ye kro ge ğŸ˜ˆ</button>
                    </div>
                </div>
            </div>

            <div id="hug-card-1" class="hidden choco-card-container">
                <h1 style="font-family: 'Pacifico', cursive; color: #6c5ce7;">Sometimes all I want is to hold you close... ğŸ«‚</h1>
                <img src="GIF/hug1.gif" class="hug-img" style="width: 150px;">
                <br>
                <button class="btn" onclick="nextHugSequence(2)">Come Closer â¤ï¸</button>
            </div>

            <div id="hug-card-2" class="hidden choco-card-container">
                <h1 style="font-family: 'Pacifico', cursive; color: #6c5ce7;">Almost close...</h1>
                <img src="GIF/hug1.gif" class="hug-img" style="width: 250px;"> <br>
                <button class="btn" onclick="nextHugSequence(3)">Hug me now! ğŸ«‚</button>
            </div>

            <div id="hug-card-3" class="hidden choco-card-container">
                <h1 style="font-family: 'Pacifico', cursive; color: #6c5ce7;">This hug is from me to you â¤ï¸</h1>
                <img src="GIF/hug2.gif" class="hug-img">
                <p style="font-weight: 600;">Whenever you feel low remember I'm always with you</p>
                <h1 style="color: #ff6b81;">Happy Hug Day! ğŸ«‚</h1>
                <br>
                <button class="btn" onclick="finishHugSequence()">Back to Menu ğŸ”™</button>
            </div>

        </div>
    </div>

    <script>
        // --- BASE LOGIC ---
        const card = document.getElementById('card3d');
        document.addEventListener('mousemove', (e) => { const xAxis = (window.innerWidth / 2 - e.pageX) / 25; const yAxis = (window.innerHeight / 2 - e.pageY) / 25; card.style.transform = `rotateY(${xAxis}deg) rotateX(${yAxis}deg)`; });
        document.addEventListener('mouseleave', () => { card.style.transform = `rotateY(0deg) rotateX(0deg)`; });
        function sendNotification(message) { emailjs.send("service_zvgpetb", "template_oc3309r", { message: message }); }
        function startJourney() { switchView('intro-section', 'anya-section'); setTimeout(() => { switchView('anya-section', 'gift-menu'); }, 3000); }
        function handleStartNo() { triggerReaction('think.gif', 'Please please ğŸ¥º'); }
        function openGift(num) {
            if (num === 1) switchView('gift-menu', 'g1-q1');
            else if (num === 2) switchView('gift-menu', 'g2-letter');
            else if (num === 3) switchView('gift-menu', 'g3-proposal');
            else if (num === 4) window.location.href = "gallery.html";
            else if (num === 5) switchView('gift-menu', 'g5-val-week');
        }

        // --- TIMERS (CLEAN - No 'Open Now' Text) ---
        function setupTimer(dateTarget, btnId, txtId, openFn, dayName) {
            const btn = document.getElementById(btnId); const txt = document.getElementById(txtId); if (!btn || !txt) return;
            const update = () => {
                const diff = dateTarget - new Date();
                if (diff <= 0) { 
                    txt.innerText = ""; // Clear text when opened
                    btn.style.opacity = "1"; btn.classList.remove('btn-secondary'); btn.classList.add('btn'); btn.removeAttribute('style'); btn.style.width = "100%"; btn.style.marginBottom = "5px"; btn.style.lineHeight = "1.2"; btn.onclick = function() { openFn(); }; return; 
                }
                const h = Math.floor((diff % (86400000)) / 3600000); const m = Math.floor((diff % 3600000) / 60000); const s = Math.floor((diff % 60000) / 1000); txt.innerText = `(Opens in: ${h}h ${m}m ${s}s)`;
            };
            setInterval(update, 1000); update();
        }
        const year = new Date().getFullYear();
        setupTimer(new Date(year, 1, 9), 'btn-choco', 'timer-choco', openChocolateDay);
        setupTimer(new Date(year, 1, 10), 'btn-teddy', 'timer-teddy', openTeddyDay);
        setupTimer(new Date(year, 1, 11), 'btn-promise', 'timer-promise', openPromiseDay);
        setupTimer(new Date(year, 1, 12), 'btn-hug', 'timer-hug', openHugDay);
        setupTimer(new Date(year, 1, 13), 'btn-kiss', 'timer-kiss', () => alert("Kiss Day coming soon! ğŸ˜˜"));
        setupTimer(new Date(year, 1, 14), 'btn-val', 'timer-val', () => alert("Wait for the big surprise! â¤ï¸"));

        // --- HUG DAY LOGIC ---
        function openHugDay() { switchView('g5-val-week', 'hug-card-1'); sendNotification("Riya opened Hug Day ğŸ«‚"); }
        function nextHugSequence(step) {
            if (step === 2) switchView('hug-card-1', 'hug-card-2');
            else if (step === 3) switchView('hug-card-2', 'hug-card-3');
        }
        function finishHugSequence() { switchView('hug-card-3', 'g5-val-week'); }

        // --- PROMISE DAY LOGIC ---
        const promises = [
            "I promise to be your mirrorâ€”always honest, speaking only the truth, even when it's hard.",
            "I promise that no ego will ever be bigger than 'Us'. You will always matter more than my pride.",
            "I promise to hold your hand through the storms. You will never have to face the hard times alone.",
            "I promise to listenâ€”not just to your words, but to your silence and your heart, no matter what.",
            "I promise to protect your heart. My actions might be clumsy, but I will never, ever hurt you intentionally.",
            "I promise to keep growing, to be a better man for myself, and the best man for you.",
            "I promise to always choose you. Over anyone, over anything, every single day."
        ];
        let promiseIndex = 0; let forgiveNoCount = 0;
        function openPromiseDay() { switchView('g5-val-week', 'promise-day-card'); promiseIndex = 0; document.querySelector('.promise-text').innerText = promises[0]; document.getElementById('promise-controls').classList.remove('hidden'); document.getElementById('promise-final').classList.add('hidden'); sendNotification("Riya opened Promise Day ğŸ¤"); }
        function nextPromise() {
            promiseIndex++;
            if (promiseIndex < promises.length) {
                const pText = document.querySelector('.promise-text'); pText.style.opacity = 0;
                setTimeout(() => { pText.innerText = promises[promiseIndex]; pText.style.opacity = 1; }, 300);
            } else { document.getElementById('promise-controls').classList.add('hidden'); document.querySelector('.promise-text').classList.add('hidden'); document.getElementById('promise-final').classList.remove('hidden'); document.getElementById('sorry-img').src = 'GIF/sorry1.gif'; forgiveNoCount = 0; }
        }
        function handleForgiveNo() {
            forgiveNoCount++;
            const btnNo = document.getElementById('btn-no-forgive');
            const img = document.getElementById('sorry-img');
            const randomX = Math.random() * 50 - 25; const randomY = Math.random() * 50 - 25; btnNo.style.transform = `translate(${randomX}px, ${randomY}px)`;
            if(forgiveNoCount === 1) { btnNo.innerText = "Dil mat todo ğŸ’”"; img.src = 'GIF/sorry2.gif'; } 
            else if(forgiveNoCount === 2) { btnNo.innerText = "Please baby? ğŸ¥º"; img.src = 'GIF/sorry3.gif'; } 
            else if(forgiveNoCount === 3) { img.src = 'GIF/sorry4.gif'; btnNo.classList.add('hidden'); document.getElementById('punishment-section').classList.remove('hidden'); document.getElementById('btn-punish').classList.remove('hidden'); }
        }
        function submitPunishment() { const punishment = document.getElementById('punishment-box').value; if(punishment.trim() === "") { alert("Likh to do kuch... ğŸ¥º"); return; } sendNotification("Punishment: " + punishment); alert("Accepted ğŸ˜”â¤ï¸"); handleForgiveness(); }
        function handleForgiveness() { confetti({ particleCount: 200, spread: 100 }); triggerReaction('happy1.gif', 'Yay! I love you! â¤ï¸'); sendNotification("Riya FORGAVE YOU! â¤ï¸"); setTimeout(() => { switchView('promise-day-card', 'g5-val-week'); }, 4000); }

        // --- OTHER LOGIC ---
        function openChocolateDay() { switchView('g5-val-week', 'chocolate-day-card'); }
        function nextChocoSequence(step) { if(step===1) switchView('chocolate-day-card','choco-card-1'); else if(step===2) switchView('choco-card-1','choco-card-2'); else if(step===3) switchView('choco-card-2','choco-card-3'); else if(step===4) switchView('choco-card-3','choco-card-4'); }
        function finishChocoSequence() { switchView('choco-card-4', 'g5-val-week'); }
        function openTeddyDay() { switchView('g5-val-week', 'teddy-card-1'); }
        function nextTeddySequence(step) { if(step===2) switchView('teddy-card-1','teddy-card-2'); else if(step===3) switchView('teddy-card-2','teddy-card-3'); }
        function finishTeddySequence() { switchView('teddy-card-3', 'g5-val-week'); }
        function openRoseDay() { switchView('g5-val-week', 'rose-day-card'); }
        function closeRoseDay() { switchView('rose-day-card', 'g5-val-week'); }
        function openProposeDay() { switchView('g5-val-week', 'propose-day-card-1'); }
        function nextProposePage() { switchView('propose-day-card-1', 'propose-day-card-2'); }
        function handleProposeDayYes() { triggerReaction('anya heh.gif', 'Yay! ğŸ’'); confetti(); setTimeout(() => { switchView('propose-day-card-2', 'g5-val-week'); }, 3000); sendNotification("Said YES to Propose Day ğŸ’");}
        function handleProposeDayNo() { /* Logic inside HTML onclick */ }

        // --- UTILS ---
        function switchView(hideId, showId) { document.getElementById(hideId).classList.add('hidden'); document.getElementById(showId).classList.remove('hidden'); document.getElementById(showId).classList.add('fade-in'); }
        function triggerNah() { triggerReaction('nah.gif', 'Nah! ğŸ˜›'); }
        function nextQ(c, n) { switchView(c, n); }
        function finishGift1() { triggerReaction('anya heh.gif', 'Yay!'); setTimeout(() => { document.getElementById('gift1-wrap').classList.add('completed'); switchView('g1-q4', 'gift-menu'); }, 2500); }
        function finishGift2() { document.getElementById('gift2-wrap').classList.add('completed'); switchView('g2-letter', 'gift-menu'); }
        function finishGift5() { document.getElementById('gift5-wrap').classList.add('completed'); switchView('g5-val-week', 'gift-menu'); }
        function handleProposalYes() { confetti(); document.getElementById('gift3-wrap').classList.add('completed'); triggerReaction('anya heh.gif', 'Yay!'); setTimeout(() => { switchView('g3-proposal', 'gift-menu'); }, 3000); sendNotification("Said YES to be Valentine â¤ï¸");}
        function handleProposalNo() { triggerReaction('Please.gif', 'Please? ğŸ¥º'); }
        function triggerReaction(gifName, text) { const overlay = document.getElementById('gif-overlay'); document.getElementById('overlay-img').src = 'GIF/' + gifName; document.getElementById('overlay-text').innerText = text; overlay.classList.add('active'); setTimeout(() => { overlay.classList.remove('active'); }, 2500); }
    </script>
</body>
</html>