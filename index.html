<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>For My Riya ‚ù§Ô∏è</title>
    <link href="https://fonts.googleapis.com/css2?family=Fredoka:wght@400;600&family=Pacifico&family=Dancing+Script:wght@700&family=Playfair+Display:wght@600&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js"></script>
    
    <script type="text/javascript">
        (function() {
            emailjs.init("QaL88WQsnfFhga08G"); 
        })();
    </script>

    <style>
        /* --- CSS STYLES --- */
        * { margin: 0; padding: 0; box-sizing: border-box; cursor: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg'  width='40' height='48' viewport='0 0 100 100' style='fill:black;font-size:24px;'><text y='50%'>‚ù§Ô∏è</text></svg>") 16 0, auto; }

        body {
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            background: linear-gradient(135deg, #ff9a9e 0%, #fecfef 99%, #fecfef 100%);
            font-family: 'Fredoka', sans-serif;
            overflow: hidden;
            perspective: 1000px;
        }

        /* Particles */
        .bg-element {
            position: absolute;
            color: rgba(255, 255, 255, 0.6);
            animation: floatUp 15s infinite linear;
            z-index: 0;
            font-size: 2rem;
            text-shadow: 0 0 10px rgba(255,255,255,0.3);
        }
        @keyframes floatUp {
            0% { transform: translateY(110vh) rotate(0deg) scale(0.8); opacity: 0; }
            20% { opacity: 1; }
            100% { transform: translateY(-10vh) rotate(360deg) scale(1.2); opacity: 0; }
        }

        /* Container */
        .container {
            text-align: center;
            background: rgba(255, 255, 255, 0.75); 
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            padding: 40px 30px;
            border-radius: 40px;
            box-shadow: 0 30px 70px rgba(0,0,0,0.15), inset 0 0 0 2px rgba(255,255,255,0.8);
            width: 90%;
            max-width: 480px;
            z-index: 10;
            transform-style: preserve-3d;
            transition: transform 0.1s ease-out;
            position: relative;
        }
        .content-layer { transform: translateZ(60px); }

        h1 {
            color: #ff4757;
            font-family: 'Pacifico', cursive;
            font-size: 2.2rem;
            margin-bottom: 15px;
            text-shadow: 2px 2px 0px rgba(255,255,255,0.8);
        }

        p { color: #555; font-size: 1.1rem; margin-bottom: 25px; line-height: 1.5; font-weight: 600; }

        /* Scroll Area */
        .scroll-area {
            background: #fffdf0;
            padding: 25px;
            border-radius: 15px;
            box-shadow: inset 0 0 20px rgba(0,0,0,0.05);
            max-height: 50vh;
            overflow-y: auto;
            margin-bottom: 20px;
            border: 2px dashed #ffafbd;
        }
        .scroll-area::-webkit-scrollbar { width: 6px; }
        .scroll-area::-webkit-scrollbar-thumb { background: #ff4757; border-radius: 10px; }

        /* Letter Styling */
        .letter-paper { font-family: 'Dancing Script', cursive; text-align: left; color: #000000; }
        .letter-text { font-size: 1.8rem; line-height: 1.6; font-weight: 700; }
        .highlight-text { color: #ff4757; background: rgba(255, 255, 255, 0.8); padding: 0 5px; border-radius: 5px; box-shadow: 0 2px 5px rgba(0,0,0,0.05); }
        .flower-highlight { color: #d35400; background: #ffeaa7; padding: 2px 8px; border-radius: 15px; border: 2px solid #fdcb6e; display: inline-block; transform: rotate(-2deg); }

        /* Propose Text */
        .propose-text { font-family: 'Playfair Display', serif; text-align: center; color: #2c3e50; font-size: 1.2rem; line-height: 1.8; font-weight: 600; }
        .propose-highlight { color: #c0392b; font-weight: bold; font-size: 1.3rem; background: rgba(255, 200, 200, 0.3); padding: 0 5px; border-radius: 4px; }
        #propose-message { min-height: 30px; color: #ff4757; font-weight: bold; font-size: 1.2rem; margin-bottom: 10px; font-family: 'Fredoka', sans-serif; }

        /* Buttons */
        .btn-group { display: flex; justify-content: center; gap: 15px; flex-wrap: wrap; margin-top: 10px; }
        .btn {
            background: linear-gradient(45deg, #ff6b81, #ff4757);
            color: white; border: none; padding: 15px 30px; font-size: 1.1rem; border-radius: 50px; cursor: pointer;
            box-shadow: 0 10px 20px rgba(255, 71, 87, 0.3); font-weight: 600; min-width: 120px;
            transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275); width: 100%; max-width: 250px;
        }
        .btn-secondary { background: white; border: 2px solid #ff6b81; color: #ff6b81; }
        .btn:hover { transform: scale(1.05) translateY(-3px); box-shadow: 0 15px 30px rgba(255, 71, 87, 0.4); }
        .intro-btns .btn { width: auto; }
        #propose-day-no-btn { transition: all 0.2s ease-in-out; }

        /* Gift Grid */
        .gift-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 20px; margin-top: 20px; justify-items: center; }
        .gift-wrapper { display: flex; flex-direction: column; align-items: center; cursor: pointer; transition: transform 0.3s; }
        .gift-wrapper:nth-child(5) { grid-column: span 2; }
        .gift-box { font-size: 3.5rem; position: relative; filter: drop-shadow(0 10px 15px rgba(255, 107, 129, 0.3)); animation: floatGift 3s ease-in-out infinite; transition: transform 0.2s; }
        .gift-wrapper:hover .gift-box { animation: wiggle 0.5s ease-in-out infinite; }
        .gift-label { margin-top: 5px; font-weight: bold; color: #ff6b81; background: white; padding: 4px 12px; border-radius: 15px; font-size: 0.9rem; box-shadow: 0 5px 10px rgba(0,0,0,0.1); }
        .gift-wrapper.completed .gift-box::after { content: '‚úÖ'; position: absolute; bottom: -5px; right: -10px; font-size: 1.5rem; }

        @keyframes floatGift { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-10px); } }
        @keyframes wiggle { 0% { transform: rotate(0deg); } 25% { transform: rotate(-10deg); } 75% { transform: rotate(10deg); } 100% { transform: rotate(0deg); } }

        /* Utils */
        .hidden { display: none; }
        .fade-in { animation: popIn 0.6s cubic-bezier(0.175, 0.885, 0.32, 1.275); }
        @keyframes popIn { 0% { opacity: 0; transform: scale(0.5) translateZ(60px); } 100% { opacity: 1; transform: scale(1) translateZ(60px); } }

        /* Overlay */
        .overlay-popup { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.6); backdrop-filter: blur(8px); display: flex; justify-content: center; align-items: center; z-index: 100; opacity: 0; pointer-events: none; transition: opacity 0.3s; }
        .overlay-popup.active { opacity: 1; pointer-events: auto; }
        .overlay-content { background: white; padding: 25px; border-radius: 30px; text-align: center; transform: scale(0.8); transition: transform 0.3s; border: 4px solid #ffc3a0; }
        .overlay-popup.active .overlay-content { transform: scale(1); animation: bounce 0.5s; }
        .overlay-content img { max-width: 250px; border-radius: 20px; border: 3px solid #ffeff1; }
        @keyframes bounce { 0%, 20%, 50%, 80%, 100% {transform: translateY(0);} 40% {transform: translateY(-20px);} 60% {transform: translateY(-10px);} }

        /* Chocolate & Teddy Images */
        .choco-img { width: 100%; max-width: 200px; border-radius: 15px; margin: 15px 0; filter: drop-shadow(0 10px 15px rgba(255, 107, 129, 0.2)); animation: floatChoco 3s ease-in-out infinite; }
        .teddy-img { width: 100%; max-width: 220px; border-radius: 20px; border: 4px solid #ff9a9e; margin: 20px 0; }
        @keyframes floatChoco { 0%, 100% { transform: translateY(0) rotate(-3deg); } 50% { transform: translateY(-10px) rotate(3deg); } }
        .choco-card-container { background: white; padding: 30px; border-radius: 25px; box-shadow: 0 15px 35px rgba(0,0,0,0.1); border: 2px solid #ffeff1; }

        /* Petals & Heartbeat */
        .petal { position: absolute; background-color: #ff0040; border-radius: 150% 0 150% 0; animation: fall 10s infinite linear; z-index: 50; }
        @keyframes fall { 0% { top: -10%; transform: rotate(0deg) translateX(0); opacity: 1; } 100% { top: 110%; transform: rotate(360deg) translateX(100px); opacity: 0; } }
        .heartbeat-bg { animation: pulseBg 2s infinite; }
        @keyframes pulseBg { 0% { transform: scale(1); } 50% { transform: scale(1.02); } 100% { transform: scale(1); } }

    </style>
</head>
<body>

    <script>
        const shapes = ['‚ù§Ô∏è', '‚ú®', 'üå∏', 'üéÄ', 'üç¨', 'üß∏'];
        for(let i=0; i<25; i++){
            let el = document.createElement('div');
            el.className = 'bg-element';
            el.innerHTML = shapes[Math.floor(Math.random() * shapes.length)];
            el.style.left = Math.random() * 100 + 'vw';
            el.style.animationDuration = (Math.random() * 10 + 10) + 's';
            el.style.animationDelay = (Math.random() * 5) + 's';
            document.body.appendChild(el);
        }
        document.addEventListener('mousemove', function(e) {
            let trail = document.createElement('div');
            trail.className = 'trail';
            trail.style.left = e.pageX + 'px'; trail.style.top = e.pageY + 'px';
            trail.style.backgroundColor = `hsl(${Math.random() * 360}, 70%, 70%)`; 
            document.body.appendChild(trail);
            setTimeout(() => { trail.remove(); }, 1000);
        });
    </script>

    <div id="gif-overlay" class="overlay-popup">
        <div class="overlay-content">
            <img id="overlay-img" src="" alt="Reaction">
            <h2 id="overlay-text" style="color: #ff4757; margin-top: 15px; font-family: 'Fredoka';"></h2>
        </div>
    </div>

    <div class="container fade-in" id="card3d">
        <div class="content-layer">
            
            <div id="intro-section">
                <h1>Hey Riya! üëã</h1>
                <p>I built a magical little world just for you.<br>Ready to step inside?</p>
                <div class="btn-group intro-btns">
                    <button class="btn btn-secondary" onclick="handleStartNo()">No</button>
                    <button class="btn" onclick="startJourney()">Yes!</button>
                </div>
            </div>

            <div id="anya-section" class="hidden">
                <h1 style="font-size: 3rem; margin-bottom: 10px;">üòÅ‚ù§Ô∏è</h1>
                <img src="GIF/Anya heh.gif" alt="Anya" style="width: 100%; max-width: 250px; border-radius: 20px;">
            </div>

            <div id="gift-menu" class="hidden">
                <h1>Your Gifts üéÅ</h1>
                <p>Open them in any order!</p>
                <div class="gift-grid">
                    <div class="gift-wrapper" id="gift1-wrap" onclick="openGift(1)">
                        <div class="gift-box">üéÅ</div>
                        <div class="gift-label">Fun Quiz</div>
                    </div>
                    <div class="gift-wrapper" id="gift2-wrap" onclick="openGift(2)">
                        <div class="gift-box">üíå</div>
                        <div class="gift-label">Love Letter</div>
                    </div>
                    <div class="gift-wrapper" id="gift3-wrap" onclick="openGift(3)">
                        <div class="gift-box">üíç</div>
                        <div class="gift-label">The Question</div>
                    </div>
                    <div class="gift-wrapper" id="gift4-wrap" onclick="openGift(4)">
                        <div class="gift-box">üì∏</div>
                        <div class="gift-label">Memories</div>
                    </div>
                    <div class="gift-wrapper" id="gift5-wrap" onclick="openGift(5)">
                        <div class="gift-box">üìÖ</div>
                        <div class="gift-label">Val Week</div>
                    </div>
                </div>
            </div>

            <div id="g1-q1" class="hidden">
                <h1>Question 1 üßê</h1>
                <p>Who is the boss of the relationship?</p>
                <div class="btn-group">
                    <button class="btn btn-secondary" onclick="triggerNah()">Ankush</button>
                    <button class="btn" onclick="nextQ('g1-q1', 'g1-q2')">Riya</button>
                </div>
            </div>
            <div id="g1-q2" class="hidden">
                <h1>Question 2 ü•∞</h1>
                <p>Who is more cute?</p>
                <div class="btn-group">
                    <button class="btn btn-secondary" onclick="triggerNah()">Me</button>
                    <button class="btn btn-secondary" onclick="triggerNah()">You</button>
                    <button class="btn" onclick="nextQ('g1-q2', 'g1-q3')">Sammy</button>
                </div>
            </div>
            <div id="g1-q3" class="hidden">
                <h1>Question 3 üé≠</h1>
                <p>Who is the drama queen?</p>
                <div class="btn-group">
                    <button class="btn btn-secondary" onclick="triggerNah()">Me</button>
                    <button class="btn" onclick="nextQ('g1-q3', 'g1-q4')">You</button>
                </div>
            </div>
            <div id="g1-q4" class="hidden">
                <h1>Question 4 üß†</h1>
                <p>Who is the overthinker?</p>
                <div class="btn-group">
                    <button class="btn btn-secondary" onclick="triggerNah()">Me</button>
                    <button class="btn btn-secondary" onclick="triggerNah()">You</button>
                    <button class="btn" onclick="finishGift1()">Both</button>
                </div>
            </div>

            <div id="g2-letter" class="hidden">
                <h1 style="font-size: 2rem;">Dear Riya... üåπ</h1>
                <div class="scroll-area letter-paper">
                    <div class="letter-text">
                        <p>I don‚Äôt know if there will ever be a perfect moment to say all this, so I‚Äôm choosing an honest one.</p>
                        <br>
                        <p>I just want you to know how deeply I love you. Not in a loud way that I want to tell the whole world, but in a quiet way‚Äîthe kind where I want you to stay. The kind where my heart still looks for you, even when I pretend I‚Äôm okay.</p>
                        <br>
                        <p>Loving you was never a decision I made carefully. It happened naturally, slowly, and then all at once. And once it did, you became someone my heart recognizes‚Äîsomeone it feels safe with, even in silence.</p>
                        <br>
                        <p style="color:#ff4757;">Koi itna pyaara kaise ho sakta hai.</p>
                        <br>
                        <p>You are important to me in ways I don‚Äôt always know how to explain. You live in my peace, my smiles, my memories, my hopes, and even my prayers. Even when things weren‚Äôt perfect, even when life pulled us in different directions, that truth never changed.</p>
                        <br>
                        <p>I don‚Äôt love you to bind you or to hold you back. I love you simply because you are you‚Äîyour thoughts, your presence, the way you make ordinary moments feel softer and special.</p>
                        <br>
                        <div class="highlight-text">
                            <p>I just wanted you to know this:</p>
                            <p>You are loved.</p>
                            <p>You are valued.</p>
                            <p>And you will always be important to me, Riya‚Äîmore than words can ever carry.</p>
                        </div>
                    </div>
                </div>
                <button class="btn" onclick="finishGift2()">Close Letter ‚ù§Ô∏è</button>
            </div>

            <div id="g3-proposal" class="hidden">
                <img src="GIF/shy.gif" alt="Shy" style="width: 100%; max-width: 250px; border-radius: 20px; margin-bottom: 20px;">
                <h1>Will you be my Valentine? üåπ</h1>
                <div class="btn-group">
                    <button class="btn" id="g3-yes-btn" onclick="handleProposalYes()">Yes</button>
                    <button class="btn btn-secondary" id="g3-no-btn" onclick="handleProposalNo()">No</button>
                </div>
            </div>

            <div id="g5-val-week" class="hidden">
                <h1 style="font-size: 2.2rem;">Valentine Week üóìÔ∏è</h1>
                <p>A whole week just for us!</p>
                <div class="scroll-area" style="padding: 15px; background: rgba(255,255,255,0.8);">
                    <div class="btn-group" style="flex-direction: column; width: 100%; align-items: center;">
                        <button class="btn" style="width: 100%; margin-bottom: 8px;" onclick="openRoseDay()">Feb 7 - Rose Day üåπ</button>
                        <button class="btn" style="width: 100%; margin-bottom: 8px;" onclick="openProposeDay()">Feb 8 - Propose Day üíç</button>
                        
                        <button class="btn btn-secondary" id="btn-choco" style="width: 100%; margin-bottom: 5px; opacity: 0.7; line-height: 1.2;" onclick="alert('Wait for it! Upcoming... ‚è≥')">
                            Feb 9 - Chocolate Day üç´<br><span id="timer-choco" style="font-size: 0.8rem;">(Locked)</span>
                        </button>

                        <button class="btn btn-secondary" id="btn-teddy" style="width: 100%; margin-bottom: 5px; opacity: 0.7; line-height: 1.2;" onclick="alert('Wait for it! Upcoming... ‚è≥')">
                            Feb 10 - Teddy Day üß∏<br><span id="timer-teddy" style="font-size: 0.8rem;">(Locked)</span>
                        </button>

                        <button class="btn btn-secondary" id="btn-promise" style="width: 100%; margin-bottom: 5px; opacity: 0.7; line-height: 1.2;" onclick="alert('Wait for it! Upcoming... ‚è≥')">
                            Feb 11 - Promise Day ü§ù<br><span id="timer-promise" style="font-size: 0.8rem;">(Locked)</span>
                        </button>

                        <button class="btn btn-secondary" style="width: 100%; margin-bottom: 5px; opacity: 0.7;" onclick="alert('Wait for it! Upcoming... ‚è≥')">Feb 12 - Hug Day ü§ó</button>
                        <button class="btn btn-secondary" style="width: 100%; margin-bottom: 5px; opacity: 0.7;" onclick="alert('Wait for it! Upcoming... ‚è≥')">Feb 13 - Kiss Day üíã</button>
                        <button class="btn btn-secondary" style="width: 100%; margin-bottom: 5px; opacity: 0.7; line-height: 1.2;" onclick="alert('Wait for it! Upcoming... ‚è≥')">Feb 14 - Valentine's Day ‚ù§Ô∏è<br><span style="font-size: 0.8rem;">(I have a surprise for you)</span></button>
                    </div>
                </div>
                <button class="btn" style="margin-top: 10px;" onclick="finishGift5()">Back to Menu üîô</button>
            </div>

            <div id="rose-day-card" class="hidden">
                <div id="petals-container"></div>
                <h1 style="font-size: 2.5rem;">Happy Rose Day üåπ</h1>
                <div class="scroll-area letter-paper">
                    <div class="letter-text">
                        <p>They say Rose Day is about giving flowers, but for me, it‚Äôs about giving a <span class="highlight-text">feeling</span>.</p>
                        <br>
                        <p>A feeling of <span class="highlight-text">care</span>. A feeling of <span class="highlight-text">warmth</span>. A feeling that quietly says, <span class="highlight-text">‚ÄúYou matter to me.‚Äù</span></p>
                        <br>
                        <p>Even though roses symbolise love today, I know your heart smiles more at <span class="flower-highlight">tulips</span> and <span class="flower-highlight">sunflowers</span> ‚Äî the gentle ones, the bright ones.</p>
                        <br>
                        <p>So this isn‚Äôt just a rose‚Ä¶ it‚Äôs my way of saying <span class="highlight-text">I choose you</span>, your happiness, and your smile.</p>
                        <br>
                        <p>Happy Rose Day, <span class="highlight-text">Riya</span>. This is for you üå∑üåª</p>
                    </div>
                </div>
                <button class="btn" onclick="closeRoseDay()">Close ‚ù§Ô∏è</button>
            </div>

            <div id="propose-day-card-1" class="hidden heartbeat-bg">
                <h1 style="font-family: 'Playfair Display', serif; color: #880e4f;">The Turkish Belief üåô</h1>
                <div class="scroll-area" style="background: rgba(255,255,255,0.9); border: none;">
                    <div class="propose-text">
                        <p>There‚Äôs a Turkish belief that people fall in love <span class="propose-highlight">twice</span> with the same person.</p>
                        <br>
                        <p>The first time, with the <span class="propose-highlight">feeling</span>. The second time, with the <span class="propose-highlight">reality</span>.</p>
                        <br>
                        <p>I don‚Äôt know how true this theory is for everyone, but I know this ‚Äî <span class="propose-highlight">with you, I‚Äôve felt both.</span></p>
                        <br>
                        <p>And the second time feels calmer, deeper, and more certain. It just feels <span class="propose-highlight">honest</span>.</p>
                    </div>
                </div>
                <button class="btn" style="background: #880e4f;" onclick="nextProposePage()">Next ‚ù§Ô∏è</button>
            </div>
            <div id="propose-day-card-2" class="hidden">
                <div style="font-size: 4rem; margin-bottom: 20px;">üíç</div>
                <h1 style="font-family: 'Dancing Script', cursive; font-size: 3rem; color: #c2185b;">Riya, will you be mine?</h1>
                <br>
                <div id="propose-message"></div>
                <div class="btn-group" style="position: relative; height: 120px; width: 100%; display: flex; justify-content: center; align-items: flex-start;">
                    <button class="btn" style="background: linear-gradient(45deg, #c2185b, #e91e63); z-index: 10; width: auto; min-width: 150px;" onclick="handleProposeDayYes()">Of course Yes! ‚ù§Ô∏è</button>
                    <button class="btn btn-secondary" id="propose-day-no-btn" style="width: auto; min-width: 100px; margin-left: 10px;" onclick="handleProposeDayNo()">No</button>
                </div>
            </div>

            <div id="chocolate-day-card" class="hidden choco-card-container">
                <h1 style="font-family: 'Pacifico', cursive; color: #ff6b81;">I ate kinderjoy today üòã</h1>
                <img src="GIF/chocolate.gif" alt="Eating Chocolate" class="choco-img">
                <h1 style="font-family: 'Pacifico', cursive; color: #ff4757;">Happy Chocolate Day! üç´</h1>
                <br><button class="btn" onclick="nextChocoSequence(1)">Next üç´</button>
            </div>
            <div id="choco-card-1" class="hidden choco-card-container">
                <h1 style="font-family: 'Pacifico', cursive; color: #ff6b81;">Hey my...</h1>
                <img src="gallery/pie.png" class="choco-img"><br><br>
                <button class="btn" style="background: #ff6b81;" onclick="nextChocoSequence(2)">Next ‚ù§Ô∏è</button>
            </div>
            <div id="choco-card-2" class="hidden choco-card-container">
                <h1 style="font-family: 'Pacifico', cursive; color: #6c5ce7;">My mind gets...</h1>
                <img src="gallery/fuse.png" class="choco-img">
                <h1 style="font-family: 'Pacifico', cursive; color: #6c5ce7;">when I see you ‚ö°</h1>
                <button class="btn" style="background: #6c5ce7;" onclick="nextChocoSequence(3)">Next ‚ö°</button>
            </div>
            <div id="choco-card-3" class="hidden choco-card-container">
                <h1 style="font-family: 'Pacifico', cursive; color: #00b894;">You are the true...</h1>
                <img src="gallery/gems.png" class="choco-img">
                <h1 style="font-family: 'Pacifico', cursive; color: #00b894;">of my life üíé</h1>
                <button class="btn" style="background: #00b894;" onclick="nextChocoSequence(4)">Next üíé</button>
            </div>
            <div id="choco-card-4" class="hidden choco-card-container">
                <h1 style="font-family: 'Pacifico', cursive; color: #fdcb6e;">I will give you...</h1>
                <img src="gallery/5star.png" class="choco-img">
                <h1 style="font-family: 'Pacifico', cursive; color: #fdcb6e;">for being there in my life üåü</h1>
                <button class="btn" style="background: #fdcb6e; color: #333;" onclick="finishChocoSequence()">Love You! ‚ù§Ô∏è</button>
            </div>

            <div id="teddy-card-1" class="hidden choco-card-container">
                <img src="GIF/teddy.gif" class="teddy-img">
                <h1 style="font-family: 'Fredoka', sans-serif; font-size: 1.8rem; color: #ff6b81;">Main hu na, Teddy ki kya jarurat hai? üò§</h1>
                <br>
                <button class="btn" onclick="nextTeddySequence(2)">Still Teddy Chaiye ü•∫</button>
            </div>
            
            <div id="teddy-card-2" class="hidden choco-card-container">
                <img src="GIF/teddycry.gif" class="teddy-img">
                <h1 style="font-family: 'Fredoka', sans-serif; font-size: 1.8rem; color: #ff6b81;">Hmph! Jao baat nahi karni... üò≠</h1>
                <br>
                <button class="btn" onclick="nextTeddySequence(3)">Aree sorry, next! ‚ù§Ô∏è</button>
            </div>

            <div id="teddy-card-3" class="hidden choco-card-container">
                <img src="GIF/teddyplay.gif" class="teddy-img">
                <h1 style="font-family: 'Pacifico', cursive; font-size: 2rem; color: #ff4757;">Mere sath aise khel lena üòâ</h1>
                <h2 style="color: #ff6b81;">Happy Teddy Day! üß∏</h2>
                <br>
                <button class="btn" onclick="finishTeddySequence()">Back to Menu üîô</button>
            </div>

        </div>
    </div>

    <script>
        // --- LOGIC ---
        const card = document.getElementById('card3d');
        document.addEventListener('mousemove', (e) => {
            const xAxis = (window.innerWidth / 2 - e.pageX) / 25;
            const yAxis = (window.innerHeight / 2 - e.pageY) / 25;
            card.style.transform = `rotateY(${xAxis}deg) rotateX(${yAxis}deg)`;
        });
        document.addEventListener('mouseleave', () => { card.style.transform = `rotateY(0deg) rotateX(0deg)`; });

        function sendNotification(message) {
            emailjs.send("service_zvgpetb", "template_oc3309r", { message: message })
            .then(() => console.log("Sent: " + message), (err) => console.log("Error", err));
        }

        function startJourney() {
            switchView('intro-section', 'anya-section');
            sendNotification("Riya CLICKED YES on the Intro Page! üöÄ");
            setTimeout(() => { switchView('anya-section', 'gift-menu'); }, 3000);
        }
        function handleStartNo() { triggerReaction('think.gif', 'Please please ü•∫'); sendNotification("Riya clicked NO on Intro ü•∫"); }

        function openGift(num) {
            let giftName = "";
            if (num === 1) { switchView('gift-menu', 'g1-q1'); giftName = "Quiz"; }
            else if (num === 2) { switchView('gift-menu', 'g2-letter'); giftName = "Letter"; }
            else if (num === 3) { switchView('gift-menu', 'g3-proposal'); giftName = "Final Proposal"; }
            else if (num === 4) { window.location.href = "gallery.html"; giftName = "Gallery"; }
            else if (num === 5) { switchView('gift-menu', 'g5-val-week'); giftName = "Val Week Menu"; }
            if(giftName) sendNotification("Riya opened: " + giftName);
        }

        // --- TIMERS ---
        function setupTimer(dateTarget, btnId, txtId, openFn, dayName) {
            const btn = document.getElementById(btnId);
            const txt = document.getElementById(txtId);
            if (!btn || !txt) return;

            const update = () => {
                const now = new Date();
                const diff = dateTarget - now;
                if (diff <= 0) {
                    txt.innerText = "(Open Now!)";
                    btn.style.opacity = "1";
                    btn.classList.remove('btn-secondary');
                    btn.classList.add('btn');
                    btn.removeAttribute('style'); // Use CSS pink
                    btn.style.width = "100%"; btn.style.marginBottom = "5px"; btn.style.lineHeight = "1.2";
                    btn.onclick = function() { openFn(); };
                    return;
                }
                const h = Math.floor((diff % (86400000)) / 3600000);
                const m = Math.floor((diff % 3600000) / 60000);
                const s = Math.floor((diff % 60000) / 1000);
                txt.innerText = `(Opens in: ${h}h ${m}m ${s}s)`;
            };
            setInterval(update, 1000);
            update();
        }

        const now = new Date();
        const year = now.getFullYear();
        // Month is 0-indexed (Feb = 1)
        const dateChoco = new Date(year, 1, 9, 0, 0, 0); 
        const dateTeddy = new Date(year, 1, 10, 0, 0, 0); 
        const datePromise = new Date(year, 1, 11, 0, 0, 0); 

        setupTimer(dateChoco, 'btn-choco', 'timer-choco', openChocolateDay, "Chocolate Day");
        setupTimer(dateTeddy, 'btn-teddy', 'timer-teddy', openTeddyDay, "Teddy Day");
        setupTimer(datePromise, 'btn-promise', 'timer-promise', () => alert('Promise Day Coming Soon!'), "Promise Day");

        // --- TEDDY DAY LOGIC ---
        function openTeddyDay() {
            switchView('g5-val-week', 'teddy-card-1');
            sendNotification("Riya opened Teddy Day üß∏");
        }
        function nextTeddySequence(step) {
            if (step === 2) {
                switchView('teddy-card-1', 'teddy-card-2');
                sendNotification("Riya clicked 'Still Teddy Chaiye' üò§");
            } else if (step === 3) {
                switchView('teddy-card-2', 'teddy-card-3');
                sendNotification("Riya reached Happy Teddy Day üß∏‚ù§Ô∏è");
            }
        }
        function finishTeddySequence() {
            switchView('teddy-card-3', 'g5-val-week');
        }

        // --- CHOCOLATE LOGIC ---
        function openChocolateDay() { switchView('g5-val-week', 'chocolate-day-card'); sendNotification("Riya started Chocolate Day! üç´"); }
        function nextChocoSequence(step) {
            if (step === 1) switchView('chocolate-day-card', 'choco-card-1');
            else if (step === 2) switchView('choco-card-1', 'choco-card-2');
            else if (step === 3) switchView('choco-card-2', 'choco-card-3');
            else if (step === 4) switchView('choco-card-3', 'choco-card-4');
        }
        function finishChocoSequence() { switchView('choco-card-4', 'g5-val-week'); sendNotification("Riya finished Chocolate Puns! üç´"); }

        // --- ROSE & PROPOSE LOGIC ---
        let petalInterval;
        function createPetal() {
            const petal = document.createElement('div'); petal.classList.add('petal');
            petal.style.left = Math.random() * 100 + '%'; petal.style.width = Math.random() * 10 + 10 + 'px'; petal.style.height = Math.random() * 10 + 10 + 'px';
            petal.style.backgroundColor = `rgba(255, ${Math.random() * 100}, ${Math.random() * 100 + 50}, 0.8)`;
            document.getElementById('petals-container').appendChild(petal);
            setTimeout(() => { petal.remove(); }, 10000);
        }
        function openRoseDay() { switchView('g5-val-week', 'rose-day-card'); petalInterval = setInterval(createPetal, 300); sendNotification("Riya reading Rose Day üåπ"); }
        function closeRoseDay() { switchView('rose-day-card', 'g5-val-week'); clearInterval(petalInterval); document.getElementById('petals-container').innerHTML = ''; }

        let proposeNoCount = 0;
        const proposeTexts = ["Please? ü•∫", "Really? üò¢", "Man ja na! ‚ù§Ô∏è", "Don't break my heart üíî", "Ghost mode activated üëª"];
        function openProposeDay() { switchView('g5-val-week', 'propose-day-card-1'); sendNotification("Riya opened Propose Day üíç"); }
        function nextProposePage() { switchView('propose-day-card-1', 'propose-day-card-2'); sendNotification("Riya moved to Propose Question üíç"); }
        function handleProposeDayNo() {
            const msgDiv = document.getElementById('propose-message');
            if (proposeNoCount < proposeTexts.length) msgDiv.innerText = proposeTexts[proposeNoCount];
            proposeNoCount++;
            const btn = document.getElementById('propose-day-no-btn');
            btn.style.position = 'absolute';
            btn.style.left = Math.random() * 80 + '%'; btn.style.top = Math.random() * 80 + '%';
            if(proposeNoCount >= 5) { btn.style.display = 'none'; msgDiv.innerText = "Okay... you have no choice now! üëª"; }
            sendNotification("Riya clicked NO on Propose Day üíî (" + proposeNoCount + ")");
        }
        function handleProposeDayYes() {
            triggerReaction('anya heh.gif', 'Yay! üíç');
            confetti({ particleCount: 150, spread: 70, origin: { y: 0.6 } });
            sendNotification("Riya said YES to Propose Day! üíç‚ù§Ô∏è");
            setTimeout(() => {
                switchView('propose-day-card-2', 'g5-val-week');
                proposeNoCount = 0;
                const btn = document.getElementById('propose-day-no-btn');
                btn.style.display = 'inline-block'; btn.style.position = 'relative'; btn.style.left = 'auto'; btn.style.top = 'auto';
                document.getElementById('propose-message').innerText = "";
            }, 3000);
        }

        // --- MAIN LOGIC ---
        function nextQ(current, next) { switchView(current, next); sendNotification("Riya answered Quiz ‚úÖ"); }
        function finishGift1() { triggerReaction('anya heh.gif', 'Yayy! Correct! ‚ù§Ô∏è'); setTimeout(() => { document.getElementById('gift1-wrap').classList.add('completed'); switchView('g1-q4', 'gift-menu'); sendNotification("Riya FINISHED Quiz üß†"); }, 2500); }
        function finishGift2() { document.getElementById('gift2-wrap').classList.add('completed'); switchView('g2-letter', 'gift-menu'); sendNotification("Riya finished Letter üíå"); }
        function finishGift5() { document.getElementById('gift5-wrap').classList.add('completed'); switchView('g5-val-week', 'gift-menu'); }
        let noClickCount = 0;
        function handleProposalNo() {
            noClickCount++;
            if (noClickCount === 1) triggerReaction('Please.gif', 'Please? ü•∫');
            else if (noClickCount === 2) triggerReaction('Please2.gif', 'Pretty Please? ü•∫');
            else { const yesBtn = document.getElementById('g3-yes-btn'); yesBtn.style.transform = `scale(${1 + noClickCount * 0.5})`; if(noClickCount > 3) document.getElementById('g3-no-btn').style.display = 'none'; }
            sendNotification("Riya clicked NO on Final Question üíî (" + noClickCount + ")");
        }
        function handleProposalYes() {
            confetti({ particleCount: 150, spread: 70, origin: { y: 0.6 } });
            document.getElementById('gift3-wrap').classList.add('completed');
            triggerReaction('anya heh.gif', 'YAY! Can\'t wait! üåπ');
            sendNotification("Riya said YES to be your Valentine! üåπ‚ù§Ô∏è");
            setTimeout(() => { switchView('g3-proposal', 'gift-menu'); }, 3000);
            let end = Date.now() + 3000; let colors = ['#ff4757', '#ffffff'];
            (function frame() { confetti({ particleCount: 2, angle: 60, spread: 55, origin: { x: 0 }, colors: colors }); confetti({ particleCount: 2, angle: 120, spread: 55, origin: { x: 1 }, colors: colors }); if (Date.now() < end) requestAnimationFrame(frame); }());
        }

        // --- UTILS ---
        function switchView(hideId, showId) {
            document.getElementById(hideId).classList.add('hidden');
            const showEl = document.getElementById(showId);
            showEl.classList.remove('hidden');
            showEl.classList.add('fade-in');
        }
        function triggerNah() { triggerReaction('nah.gif', 'Nah! üòõ'); sendNotification("Riya clicked WRONG in Quiz ‚ùå"); }
        function triggerReaction(gifName, text) {
            const overlay = document.getElementById('gif-overlay');
            document.getElementById('overlay-img').src = 'GIF/' + gifName;
            document.getElementById('overlay-text').innerText = text;
            overlay.classList.add('active');
            setTimeout(() => { overlay.classList.remove('active'); }, 2500);
        }
    </script>
</body>
</html>